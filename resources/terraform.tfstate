{"version":4,"terraform_version":"1.10.6","serial":12,"lineage":"da8e1fc8-e1d6-85ab-96de-25126adb7d3c","outputs":{},"resources":[{"mode":"data","type":"aws_caller_identity","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"account_id":"182545048321","arn":"arn:aws:iam::182545048321:user/emanuele.viale","id":"182545048321","user_id":"AIDASVAEIMMA3RU2CSTUH"},"sensitive_attributes":[]}]},{"mode":"managed","type":"aws_iam_policy","name":"permission_policy_s3_cross_account","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"arn":"arn:aws:iam::182545048321:policy/policy-s3-TEST-write","attachment_count":0,"description":"","id":"arn:aws:iam::182545048321:policy/policy-s3-TEST-write","name":"policy-s3-TEST-write","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1\"},{\"Action\":[\"s3:PutObject\",\"s3:PutObjectAcl\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1/webdac/*\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPASVAEIMMA4YDQZSVWM","tags":{},"tags_all":{}},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_iam_role","name":"role_s3_cross_account","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"arn":"arn:aws:iam::182545048321:role/role-emeahub-primeur-s3-TEST-write","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::905418403597:role/role-emeahub-primeur\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-10-22T16:47:25Z","description":"","force_detach_policies":false,"id":"role-emeahub-primeur-s3-TEST-write","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"role-emeahub-primeur-s3-TEST-write","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROASVAEIMMA545QCBJXP"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_iam_role_policy_attachment","name":"role_policy_attachment_s3_cross_account","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"role-emeahub-primeur-s3-TEST-write-20251022171648113600000001","policy_arn":"arn:aws:iam::182545048321:policy/policy-s3-TEST-write","role":"role-emeahub-primeur-s3-TEST-write"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_policy.permission_policy_s3_cross_account","aws_iam_role.role_s3_cross_account"]}]},{"mode":"managed","type":"aws_s3_bucket","name":"bucket-test","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","bucket":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","bucket_domain_name":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1.s3.eu-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"38d7226fda199659f870db2017fa6106823479a1f137d4949bc5509f0b8d2a19","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z1BKCTXD74EZPE","id":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"{\"Statement\":[{\"Action\":\"s3:ListBucket\",\"Condition\":{\"StringEquals\":{\"aws:SourceVpce\":\"vpce-03c3497e6ad87918e\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::905418403597:role/role-emeahub-primeur\"},\"Resource\":\"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1\"},{\"Action\":[\"s3:PutObject\",\"s3:PutObjectAcl\",\"s3:GetObject\"],\"Condition\":{\"StringEquals\":{\"aws:SourceVpce\":\"vpce-03c3497e6ad87918e\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::905418403597:role/role-emeahub-primeur\"},\"Resource\":\"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1/webdac/*\"}],\"Version\":\"2012-10-17\"}","region":"eu-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":true}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"}]},{"mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"bucket-ownership-controls","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"bucket":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","id":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","rule":[{"object_ownership":"BucketOwnerEnforced"}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.bucket-test"]}]},{"mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policy_s3_cross_account","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"bucket":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","id":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","policy":"{\"Statement\":[{\"Action\":\"s3:ListBucket\",\"Condition\":{\"StringEquals\":{\"aws:SourceVpce\":\"vpce-03c3497e6ad87918e\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::905418403597:role/role-emeahub-primeur\"},\"Resource\":\"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1\"},{\"Action\":[\"s3:PutObject\",\"s3:PutObjectAcl\",\"s3:GetObject\"],\"Condition\":{\"StringEquals\":{\"aws:SourceVpce\":\"vpce-03c3497e6ad87918e\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::905418403597:role/role-emeahub-primeur\"},\"Resource\":\"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1/webdac/*\"}],\"Version\":\"2012-10-17\"}"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.bucket-test"]}]},{"mode":"managed","type":"aws_s3_bucket_public_access_block","name":"bucket-public-access-block","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"block_public_acls":true,"block_public_policy":true,"bucket":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","id":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.bucket-test"]}]},{"mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"bucket-server-side-encryption","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"bucket":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","expected_bucket_owner":"","id":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":true}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.bucket-test"]}]},{"mode":"managed","type":"aws_s3_object","name":"bucket-test-first-folder","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"acl":"private","arn":"arn:aws:s3:::test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1/webdac/","bucket":"test2-s3-gdrps3-etl-np-bsn0029686-dev-eu-west-1","bucket_key_enabled":false,"cache_control":"","checksum_algorithm":null,"checksum_crc32":"","checksum_crc32c":"","checksum_crc64nvme":"","checksum_sha1":"","checksum_sha256":"","content":null,"content_base64":null,"content_disposition":"","content_encoding":"","content_language":"","content_type":"application/octet-stream","etag":"d41d8cd98f00b204e9800998ecf8427e","force_destroy":false,"id":"webdac/","key":"webdac/","kms_key_id":null,"metadata":{},"object_lock_legal_hold_status":"","object_lock_mode":"","object_lock_retain_until_date":"","override_provider":[],"server_side_encryption":"AES256","source":null,"source_hash":null,"storage_class":"STANDARD","tags":{},"tags_all":{},"version_id":"","website_redirect":""},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.bucket-test"]}]}],"check_results":null}
